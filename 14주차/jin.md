### 48장. 모듈

- 모듈
  - 애플리케이션을 구성하는 개별적 요소로 재사용 가능한 코드 조각
  - 기능을 기준으로 파일 단위로 분리
  - 성립 요건 : 파일 스코프 보유
    - 모듈 자산 기본적으로 비공개
    - 개별적 존재로서 애플리케이션과 분리되어 존재
  - 재사용되어야 유의미한 존재 &rarr; export (공개가 필요한 자산에 한정하여 명시적으로 선택적 공개)
  - 모듈을 재사용 &rarr; import
  - 재사용성 &rarr; 개발 효율성, 유지보수성 높임

자바스크립트는 모듈을 지원하지 않았다. 범용성을 높이기 위해 모듈 시스템이 필요해졌고 이를 위해 제안된 것이 CommonJS, AMD

- ES6 모듈

  - JS에서도 동작하는 모듈 기능 추가

  - ```html
    <script type="module" src="app.mjs"></script>
    ```

  - 독자적인 모듈 스코프을 가지므로 모듈 내에서 선언한 식별자는 모듈 외부에서 참조 불가 &rarr; export, import 키워드 사용



### 49장. Babel과 Webpack을 이용한 ES6+/ES.NEXT 개발 환경 구축

브라우저마다 ES 사양 지원율이 제각각이기에 구형 브라우저에서 문제없이 동작 시키기위한 개발 환경을 구축하는 것이 필요 &rarr; 트랜스파일러, 모듈 번들러 사용

- ESM 보다 별도의 모듈 로더를 사용하는 이유
  - 구형 브라우저는 ESM 지원 X
  - ESM 사용해도 트랜스 파일링, 번들링 필요
  - 미지원 기능 존재, [이슈 존재](https://jakearchibald.com/2017/es-modules-in-browsers/)

- Babel 사용 시, 코드 변환

```js
// ES6, ES7 Babel 사용 전
[1, 2, 3].map(n => n ** n); 

//Babel 사용 후
"use strict";

[1, 2, 3].map(function (n) {
  return Math.pow(n, n);
});
```

- 트랜스파일링 : 특정 언어로 작성된 코드를 비슷한 다른 언어로 변환시키는 행위 

- Webpack
  - 의존 관계에 있는 JS, css, 이미지 등의 리소스들을 하나의 파일로 번들링하는 모듈 번들러
  - 별도의 모듈 로더가 필요없음
  - 여러개의 JS 파일을 하나로 번들링 하므로 여러개 파일을 로드해야하는 번거로움도 해소
- babel-polyfill
  - babel을 사용해도 ES5 사양에 대체할 기능이 없기 때문에 트랜스파일링 되지 못하고 브라우저가 지원하지 않는 코드가 남아 있을 수 있기에 폴리필 사용. (Promise, Object.assign, Array.from)
  - 구현이 누락된 새로운 기능을 메꿔주는(`fill in`) 역할

--------

### 느낀 점

ESM 보다 별도의 모듈 로더를 사용하는 이유가 현재에도 그대로일까 싶어서 더 찾아봤습니다.  현재 시점 책에 주석으로 적혔던 페이지에도 적혀있는데 이슈들은 대부분 해결되었다고 합니다. 초기의 어려움은 많이 해소되었지만 여전히 사용하지 않는 이유는 레거시 코드 및, 호환성 문제 / Node.js에서 공식적으로 지원하나 개발자들이 CommonJS에 익숙함 / 번들러들이 ESM을 잘 지원하지만 복잡한 빌드 환경에서는 설정이 까다로움 / 브라우저 환경에서는 잘 지원되나 서버 사이드에서 완전한 전환하기에는 어려움이 있음 등이 있습니다. 사용률은 증가되고 있다고 합니다. (NPM 패키지의 증가(21년 : 7.8 % &rarr; 24년 : 21%), Node.js의 지원 강화, 이중 모듈 시스템 사용 증가)

-----

### 스터디 느낀 점

이 두꺼운 책의 끝을 읽는 날이 왔다니 놀랍습니다. 혼자서 봤으면 계속 필요한 부분만 찾아서 봤을 것이 분명합니다. 처음부터 끝까지 주어진 흐름에 따라 자연스럽고 편식 없이 볼 수 있어서 좋았고 여럿이서 같이 보니 제가 해결하지 못했던 궁금증, 미처 가지지 못했던 궁금증에 대한 답까지 얻을 수 있어서 좋았습니다. 단순히 개념과 동작 원리 뿐아니라 배경 이야기까지 알 수 있어서 나름 재미도 있었습니다. 

같이의 가치는 언제나 좋은 것임을 다시금 깨달았습니다! 함께함에 매주 스터디 시간이 즐거웠습니다.
